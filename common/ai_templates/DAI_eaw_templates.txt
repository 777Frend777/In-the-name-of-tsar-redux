DAI_magical_infantry_generic = {

	roles = {
		magical_infantry
	}

	upgrade_prio = {
		factor = 100
		modifier = {
			factor = 0
			NOT = { has_tech = magical_weapons }
		}

	}

	match_to_count = 0.9

	magical_infantry_default = {

		upgrade_prio = {
			factor = 20
			modifier = {
				factor = 0
				NOT = { has_tech = magical_weapons }
			}
			modifier = {
				factor = 0.01
				OR = {
					num_of_military_factories > 40
					AND = {
						num_of_military_factories > 30
						manpower_per_military_factory > 4000
					}
					AND = {
						num_of_military_factories > 20
						manpower_per_military_factory > 6000
					}
				}
			}
			modifier = {
				factor = 0.01
				has_tech = mechanised_infantry
				NOT = { num_of_military_factories < 150 }
			}
		}
		
		production_prio = {
			factor = 10
			modifier = {
				factor = 0
				NOT = { has_tech = magical_weapons }
			}
			modifier = {
				factor = 0.01
				OR = {
					num_of_military_factories > 40
					AND = {
						num_of_military_factories > 30
						manpower_per_military_factory > 4000
					}
					AND = {
						num_of_military_factories > 20
						manpower_per_military_factory > 6000
					}
				}
			}
			modifier = {
				factor = 0.01
				has_tech = mechanised_infantry
				NOT = { num_of_military_factories < 150 }
			}
		}

		target_width = 26
		width_weight = 2
		column_swap_factor = 0.01
		reinforce_prio = 1

		can_upgrade_in_field = {
			OR = {
				num_of_military_factories > 40
				AND = {
					num_of_military_factories > 30
					manpower_per_military_factory > 4000
				}
				AND = {
					num_of_military_factories > 20
					manpower_per_military_factory > 6000
				}
			}
		}

		target_template = {
			weight = 0.95
			match_value = 20000

			regiments = {
				magical_infantry = 9
				artillery_brigade = 2
				anti_tank_brigade = 1
			}

			support = {
				engineer = 1
				artillery = 1
				anti_tank = 1
				logistics_company = 1
				field_hospital = 1
				recon = 1
				anti_air = 1
				maintenance_company = 1
				signal_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			magical_infantry
			artillery_brigade
			anti_tank_brigade

			# SUPPORT
			engineer
			artillery
			anti_tank 
			logistics_company
			field_hospital
			recon 
			anti_air 
			maintenance_company 
			signal_company 
			rocket_artillery 
		}
	}
	
	magical_infantry_default_2 = {

		upgrade_prio = {
			factor = 20
			modifier = {
				factor = 0
				NOT = { has_tech = magical_weapons }
			}
			modifier = {
				factor = 0.01
				NOT = {
					num_of_military_factories > 40
					AND = {
						num_of_military_factories > 30
						manpower_per_military_factory > 4000
					}
					AND = {
						num_of_military_factories > 20
						manpower_per_military_factory > 6000
					}
				}
			}
			modifier = {
				factor = 0.01
				has_tech = mechanised_infantry
				NOT = { num_of_military_factories < 150 }
			}
		}
		
		production_prio = {
			factor = 10
			modifier = {
				factor = 0
				NOT = { has_tech = magical_weapons }
			}
			modifier = {
				factor = 0.01
				NOT = {
					num_of_military_factories > 40
					AND = {
						num_of_military_factories > 30
						manpower_per_military_factory > 4000
					}
					AND = {
						num_of_military_factories > 20
						manpower_per_military_factory > 6000
					}
				}
			}
			modifier = {
				factor = 0.01
				has_tech = mechanised_infantry
				NOT = { num_of_military_factories < 150 }
			}
		}
		
		target_width = 30
		width_weight = 2
		column_swap_factor = 0.01
		reinforce_prio = 1

		can_upgrade_in_field = {
			stockpile_ratio = { archetype = mechanized_equipment ratio > 0.5 }
			has_tech = mechanised_infantry
			NOT = { num_of_military_factories < 150 }
		}

		target_template = {
			weight = 0.95
			match_value = 20000

			regiments = {
				magical_infantry = 10
				artillery_brigade = 3
				anti_air_brigade = 1
			}

			support = {
				engineer = 1
				field_hospital = 1
				anti_tank = 1
				anti_air = 1
				logistics_company = 1
				artillery = 1
				recon = 1
				maintenance_company = 1
				signal_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			magical_infantry
			artillery_brigade
			anti_air_brigade

			# SUPPORT
			engineer
			artillery
			anti_tank
			logistics_company
			field_hospital
			recon 
			anti_air 
			maintenance_company 
			signal_company 
			rocket_artillery
		}
	}

	magical_infantry_default_mechanized = {

		upgrade_prio = {
			factor = 20
			modifier = {
				factor = 0
				NOT = { has_tech = magical_weapons }
			}
			modifier = {
				factor = 0.01
				NOT = { has_tech = mechanised_infantry }
				num_of_military_factories < 150
			}
		}
		
		production_prio = {
			factor = 10
			modifier = {
				factor = 0
				NOT = { has_tech = magical_weapons }
			}
			modifier = {
				factor = 0.01
				NOT = { has_tech = mechanised_infantry }
				num_of_military_factories < 150
			}
		}
		
		target_width = 30
		width_weight = 2
		column_swap_factor = 20
		reinforce_prio = 1

		# workaround for a PDX bug https://forum.paradoxplaza.com/forum/threads/hoi-4-incremental-division-upgrade-does-not-work-in-most-cases.1414193/
		can_upgrade_in_field = { always = no }

		target_template = {
			weight = 0.95
			match_value = 20000

			regiments = {
				magical_mechanized = 10
				mot_artillery_brigade = 3
				mot_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				armored_car_recon = 1
				signal_company = 1
				anti_tank = 1
				logistics_company = 1
				anti_air = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
				field_hospital = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			magical_infantry
			artillery_brigade
			magical_mechanized
			mot_artillery_brigade
			light_sp_artillery_brigade
			medium_sp_artillery_brigade
			mot_anti_air_brigade

			# SUPPORT
			engineer 
			armored_car_recon 
			signal_company 
			anti_tank 
			logistics_company 
			anti_air 
			maintenance_company 
			artillery 
			rocket_artillery 
			field_hospital 
		}
	}
}

DAI_knights_generic = {

	blocked_for = {
		
	}
	
	available_for = {
	
	}

	roles = {
		knights
	}

	upgrade_prio = {
		factor = 300

		modifier = {
			factor = 0
			NOT = {
				OR = {
					has_tech = tech_knights
					has_tech = gri_ap_super_griffons
				}
			}
		}
	}

	match_to_count = 0.9

	knights_default = {

		upgrade_prio = {
			factor = 200

			modifier = {
				factor = 0
				has_tech = gri_ap_super_griffons
			}
		}

		production_prio = {
			factor = 100

			modifier = {
				factor = 0
				has_tech = gri_ap_super_griffons
			}
		}

		replace_at_match = 0.9
		replace_with = star_knights_default
		target_min_match = 0.9

		
		column_swap_factor = 20
		reinforce_prio = 2

		# workaround for a PDX bug https://forum.paradoxplaza.com/forum/threads/hoi-4-incremental-division-upgrade-does-not-work-in-most-cases.1414193/
		can_upgrade_in_field = { always = no }

		target_template = {
			weight = 0.8
			match_value = 11000.0

			support = {
				engineer = 1
				artillery = 1
				anti_tank = 1
				logistics_company = 1
				field_hospital = 1
				recon = 1
				anti_air = 1
				maintenance_company = 1
				signal_company = 1
				rocket_artillery = 1
			}

			regiments = {
				knights = 10
				artillery_brigade = 3
				anti_air_brigade = 1
			}
		}

		allowed_types = {
			knights
			artillery_brigade
			anti_air_brigade
			
			
			engineer
			artillery
			anti_tank
			logistics_company
			field_hospital
			recon 
			anti_air 
			maintenance_company 
			signal_company 
			rocket_artillery
		}
	}

	star_knights_default = {

		upgrade_prio = {
			factor = 2

			modifier = {
				factor = 0
				NOT = {
					has_tech = gri_ap_super_griffons
				}
			}
		}

		production_prio = {
			factor = 1

			modifier = {
				factor = 0
				NOT = {
					has_tech = gri_ap_super_griffons
				}
			}
		}

		target_width = 30
		width_weight = 2
		column_swap_factor = 0.01
		reinforce_prio = 2

		# workaround for a PDX bug https://forum.paradoxplaza.com/forum/threads/hoi-4-incremental-division-upgrade-does-not-work-in-most-cases.1414193/
		can_upgrade_in_field = { always = no }

		target_template = {
			weight = 0.8
			match_value = 11000.0

			support = {
				engineer = 1
				artillery = 1
				anti_tank = 1
				logistics_company = 1
				anti_air = 1
			}

			regiments = {
				super_griffons = 10
				artillery_brigade = 3
				anti_air_brigade = 1
			}
		}

		allowed_types = {
			super_griffons
			artillery_brigade
			anti_air_brigade
			engineer
			logistics_company
			field_hospital
			anti_tank
			artillery
			anti_air
			rocket_artillery
		}
	}
}

DAI_ironpaws_generic = {
	
	blocked_for = {
		
	}
	
	available_for = {
	
	}
	
	roles = {
		ironpaws
	}

	upgrade_prio = {
		factor = 30

		modifier = {
			factor = 0
			NOT = {
				has_tech = tech_ironpaws
			}
		}
	}

	match_to_count = 0.9

	ironpaws_default = {

		upgrade_prio = {
			factor = 20
		}

		reinforce_prio = 2

		target_width = 30
		width_weight = 2
		column_swap_factor = 0.01

		# workaround for a PDX bug https://forum.paradoxplaza.com/forum/threads/hoi-4-incremental-division-upgrade-does-not-work-in-most-cases.1414193/
		can_upgrade_in_field = { always = no }

		target_template = {
			weight = 0.8
			match_value = 11000.0

			support = {
				engineer = 1
				artillery = 1
				anti_tank = 1
				logistics_company = 1
				field_hospital = 1
				recon = 1
				anti_air = 1
				maintenance_company = 1
				signal_company = 1
				rocket_artillery = 1
			}

			regiments = {
				ironpaws = 10
				artillery_brigade = 3
				anti_air_brigade = 1
			}
		}

		allowed_types = {
			ironpaws
			artillery_brigade
			anti_air_brigade
			
			engineer
			artillery
			anti_tank
			logistics_company
			field_hospital
			recon 
			anti_air 
			maintenance_company 
			signal_company 
			rocket_artillery
		}
	}
}

DAI_chargers_generic = {

	blocked_for = {
		
	}
	
	available_for = {
	
	}
	
	roles = {
		chargers
	}

	upgrade_prio = {
		factor = 300

		modifier = {
			factor = 0
			NOT = {
				has_tech = tech_spirit_warriors
			}
		}
	}
	
	

	match_to_count = 0.9

	chargers_default = {

		upgrade_prio = {
			factor = 300
			
			modifier = {
			factor = 0
			NOT = {
				has_tech = tech_spirit_warriors
			}
		}
		}
		
		production_prio = {
			factor = 100

			modifier = {
				factor = 0
				NOT = {
					has_tech = tech_spirit_warriors
				}
			}
		}

		reinforce_prio = 2
		column_swap_factor = 20

		target_template = {
			weight = 0.8
			match_value = 11000.0

			support = {
				engineer = 1
				artillery = 1
				logistics_company = 1
				recon = 1
				signal_company = 1
				anti_tank = 1
				field_hospital = 1
				anti_air = 1
				maintenance_company = 1
				rocket_artillery = 1
			}

			regiments = {
				spirit_warriors = 9
				artillery_brigade = 4
			}
		}

		allowed_types = {
			spirit_warriors
			artillery_brigade
			
			
			engineer
			artillery
			anti_tank
			logistics_company
			field_hospital
			recon 
			anti_air 
			maintenance_company 
			signal_company 
			rocket_artillery
		}
	}
}

# REGIMENTS:
#infantry
#light_armor
#super_heavy_armor
#modern_armor
#heavy_armor
#medium_armor
#light_armor
#anti_tank
#cavalry
#motorized
#mechanized
#marine
#mountaineers
#paratrooper
#rocket_artillery
#light_tank_destroyer
#medium_tank_destroyer_brigade
#heavy_tank_destroyer_brigade
#super_heavy_tank_destroyer_brigade
#modern_tank_destroyer_brigade
#anti_air
#artillery

# SUPPORT:
#engineer
#recon
#signal_company
#maintenance_company
#anti_tank_brigade
#anti_air_brigade
#artillery_brigade
#field_hospital
#logistics_company
#military_police
#light_sp_anti_air_brigade
#light_sp_artillery_brigade
