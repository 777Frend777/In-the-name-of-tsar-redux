scripted_gui = {

	DS_open_config = {

		context_type = player_context

		window_name = "DS_open_config"

		visible = {
			is_ai = no

			OR = {
				NOT = { has_global_flag = DS_restrict_to_host }
				has_country_flag = DS_designated_host
				AND = {
					has_global_flag = DS_restrict_to_host
					NOT = { any_other_country = { has_country_flag = DS_designated_host } }
				}
			}
		}

		effects = {
			DS_open_config_button_click = {
				set_country_flag = DS_config_DIFFICULTY
				
				set_country_flag = DS_show_country_config_decisions
				
				every_other_country = { limit = { is_ai = no } country_event = DS.4 }
			}
		}

		triggers = {
			DS_open_config_button_click_enabled = {
				NOT = {  
					has_country_flag = DS_config_STARTUP
					has_country_flag = DS_config_DIFFICULTY
					has_country_flag = DS_config_GENERAL
				}
			}
		}
	}

	DS_open_country_config = {

		context_type = selected_country_context

		window_name = "DS_open_country_config"

		visible = {
			ROOT = { OR = { has_country_flag = DS_config_STARTUP has_country_flag = DS_config_DIFFICULTY has_country_flag = DS_config_GENERAL } }
		}

		effects = {
			DS_open_country_config_button_click = {
				ROOT = {
					clr_country_flag = DS_config_CUSTOM_BONUS
					
					set_country_flag = DS_config_COUNTRY

					PREV = {
						set_country_flag = DS_player_is_configuring_this_country

						set_country_flag = DS_player_is_configuring_this_country_@ROOT

						set_variable = { ROOT.DS_configuration_target = THIS.id }
					}
					
					set_variable = { ROOT.DS_dd_unit_count = PREV.DS_dd_unit_count }
				}
			}
		}

		triggers = {
			DS_open_country_config_button_click_enabled = {
				is_ai = yes
				
				NOT = { tag = ROOT }

				NOT = { has_country_flag = DS_player_is_configuring_this_country has_country_flag = DS_AI_is_configuring_this_country }

				NOT = { 
					ROOT = { has_country_flag = DS_config_COUNTRY } 
					ROOT = { has_country_flag = DS_config_ARMY } 
					ROOT = { has_country_flag = DS_config_ARMY_DIPLOMATIC } 
				}
			}
		}
	}
}